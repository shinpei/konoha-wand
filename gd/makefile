# Makefile for konoha package
# This makefile is generated by gen_pkgmake.k
# shinpei(c)2009

CC = gcc
CFLAGS = -O2 -Wall -fmessage-length=0
LDLIBS = -lkonoha 
LDLIBS += -lgd
LDLIBS += -lpng
LDLIBS += -lz
LDLIBS += -ljpeg
LDLIBS += -lfreetype
LDLIBS += -lm
library = gd.so
.PHONY: all
all: $(library)

objs = gd.o
gd.o: gd.c
	$(CC) $(CFLAGS) -o $@ -c $^
$(library): $(objs)
	$(CC) -shared -Wl -o $@ $^ $(LDLIBS)
.PHONY: clean
clean:
	$(RM) -rf $(objs) $(library)

.PHONY: konoha_install
konoha_install: $(library)
	mkdir -p .konoha/gd
	cp $(library) .konoha/gd
	cp gd.k .konoha/gd
